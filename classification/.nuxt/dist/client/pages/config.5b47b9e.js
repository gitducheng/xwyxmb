(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{313:function(e,t,n){var content=n(329);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(64).default)("81fd802e",content,!0,{sourceMap:!1})},314:function(e,t,n){var content=n(331);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(64).default)("ab6698f6",content,!0,{sourceMap:!1})},315:function(e,t,n){var content=n(333);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(64).default)("2fb1d6d2",content,!0,{sourceMap:!1})},321:function(e){e.exports=JSON.parse('{"title":"超级分类","data":[{"className":"蔬菜","subClass":"","sub":["西红柿","辣椒","茄子","土豆"]},{"className":"水果","subClass":"","sub":["苹果","香蕉","菠萝","桃子"]},{"className":"肉类","subClass":"","sub":["牛肉","猪肉","鸡肉"]}]}')},328:function(e,t,n){"use strict";var r=n(313);n.n(r).a},329:function(e,t,n){(t=n(63)(!1)).push([e.i,".g-header{font-size:16px;color:#152c2c;text-align:center;width:300px;margin:20px auto 0}.el-input__inner::-moz-placeholder{color:#5f6c65;font-size:16px}.el-input__inner:-ms-input-placeholder{color:#5f6c65;font-size:16px}.el-input__inner::-ms-input-placeholder{color:#5f6c65;font-size:16px}.el-input__inner::placeholder{color:#5f6c65;font-size:16px}.el-input,.el-input__inner,.el-textarea__inner,input,textarea{font-size:16px;color:#152c2c}",""]),e.exports=t},330:function(e,t,n){"use strict";var r=n(314);n.n(r).a},331:function(e,t,n){(t=n(63)(!1)).push([e.i,".g-footer{position:fixed;bottom:0;right:0;width:100%;background:#fff;text-align:right;z-index:100;padding:10px 20px 10px 0}.g-footer .el-button--info,.g-footer .el-button--info span{color:#5f6c65;background:#ccc;border-color:#ccc}.g-footer .el-button--success,.g-footer .el-button--success span{background:#0ed04b;border-color:#0ed04b;color:#fff}",""]),e.exports=t},332:function(e,t,n){"use strict";var r=n(315);n.n(r).a},333:function(e,t,n){(t=n(63)(!1)).push([e.i,'*{font-family:" 微软雅黑";color:#152c2c}#__layout,#__layout>div,#__nuxt,.g-config,body,html{height:100%}html{overflow:hidden}.g-config{width:90%;height:80%;margin:20px auto 0}.g-config__main{margin-top:20px;width:100%;height:90%}.g-config__main .el-table td,.g-config__main .el-table th{padding:0}.g-config__main .el-input__inner{border:none;background-color:transparent}.g-config__main .el-table--border td:first-child .cell,.g-config__main .el-table--border th:first-child .cell,.g-config__main .el-table .cell{padding:0}.g-config__main .el-table__header-wrapper .el-table__header th :first-child{padding-left:30px}.g-config__main .el-table--enable-row-hover .el-table__body tr:hover>td .g-config__remove{display:inline-block}.g-config__main .el-table .el-input{width:200px}.g-config__class-name .el-input__inner{padding-left:26px}.g-config__remove{position:absolute;font-size:16px;top:50%;left:1px;display:none;cursor:pointer;transform:translateY(-50%);z-index:5}.g-config__remove:hover{color:#5cb6ff}.g-config__addClass{float:left;margin-left:40px;margin-top:-40px;color:#fff}.g-config__addClass i,.g-config__addClass span{color:#fff}.g-config__addClass i{font-size:20px;vertical-align:middle;line-height:10px}.g-config__sub-class-input{display:inline-block}.g-config__sub-class-input .el-input__inner{padding:0}.g-config__sub-class{margin-left:4px;background:#dffff4;width:68px!important}.g-config__sub-class .el-input__inner{padding:0;text-align:center}',""]),e.exports=t},338:function(e,t,n){"use strict";n.r(t);n(10),n(130),n(31);var r=n(2),l=(n(317),n(321)),o=n(320),c={name:"GHeader",props:{value:{type:String,default:""}},computed:{title:{get:function(){return this.value},set:function(e){this.$emit("input",e)}}}},f=(n(328),n(36)),d=Object(f.a)(c,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"g-header"},[n("el-input",{attrs:{placeholder:"点击输入标题",maxlength:"6"},model:{value:e.title,callback:function(t){e.title=t},expression:"title"}})],1)}),[],!1,null,null,null).exports,m={methods:{addDefaultData:function(){this.$emit("addDefaultData")},commit:function(){this.$emit("commit")}}};n(330);function _(){var e=document.body.clientWidth;document.querySelector("html").style.fontSize=20*e/1920+"px"}var h={data:function(){return{isWaiting:!1,title:"超级分类",tableData:[{className:"",subClass:"",sub:[]},{className:"",subClass:"",sub:[]}]}},computed:{nameLabel:function(){return"类别 ".concat(this.tableData.length,"/8")},subClassCount:function(){return this.tableData.reduce((function(e,t){return e+=t.sub.length}),0)},subClassLabel:function(){return"子类别 ".concat(this.subClassCount,"/30")}},mounted:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return document.body.onresize=_,_(),t.next=4,e.getConfigData();case 4:(data=t.sent)&&(e.title=data.title,e.tableData=data.data);case 6:case"end":return t.stop()}}),t)})))()},components:{GHeader:d,GFooter:Object(f.a)(m,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"g-footer"},[this._t("default"),this._v(" "),t("el-button",{attrs:{type:"info"},on:{click:this.addDefaultData}},[this._v("导入范例")]),this._v(" "),t("el-button",{attrs:{type:"success"},on:{click:this.commit}},[this._v("完成")])],2)}),[],!1,null,null,null).exports},methods:{focusName:function(data){console.log(data)},focusSubClassName:function(e){document.querySelectorAll(".g-config__sub-class-input input")[e].focus()},addSubClassName:function(data){var e=data.$index,t=data.row.subClass;return!!t&&(this.subClassCount>=30?(this.$message({message:"子类别最多添加30个哦",type:"error"}),!1):(this.tableData[e].sub.push(t),void(this.tableData[e].subClass="")))},removeClass:function(e){if(this.tableData.length<=2)return this.$message({message:"至少需要两种分类哦",type:"error"}),!1;this.tableData.splice(e,1)},commit:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n,r,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.isWaiting){t.next=2;break}return t.abrupt("return",!1);case 2:if(n=e.tableData.every((function(e,t){return e.className&&e.sub.length})),e.title){t.next=6;break}return e.$message({type:"error",message:"标题还未填写哦"}),t.abrupt("return",!1);case 6:if(n){t.next=9;break}return e.$message({type:"error",message:"还有分类未填写哦"}),t.abrupt("return",!1);case 9:return r={title:e.title,data:e.tableData},t.prev=10,e.isWaiting=!0,t.next=14,e.getGameImg(r);case 14:return l=t.sent,t.next=17,e.$testsave(l,JSON.stringify(r));case 17:t.next=23;break;case 19:t.prev=19,t.t0=t.catch(10),console.log(t.t0),localStorage.setItem("classificationData",JSON.stringify(r));case 23:e.isWaiting=!1,e.$router.replace("/");case 25:case"end":return t.stop()}}),t,null,[[10,19]])})))()},addDefaultData:function(){this.title=l.title;var e=JSON.stringify(l.data);this.tableData=JSON.parse(e)},addClass:function(){if(this.tableData.length>=8)return this.$message({message:"最多添加8个分类",type:"error"}),!1;this.tableData.push({className:"",subClass:"",sub:[]})},subBlur:function(data,e,t){data.target.value||this.tableData[e].sub.splice(t,1)},getGameImg:function(e){return Object(r.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=document.createElement("div"),t.abrupt("return",new Promise((function(t,r){new o.a({container:n,configData:e,callback:function(e){var n=e.stage,r=e.ticker;if(n.canvas&&r){var img=n.canvas.toDataURL("image/png");if(img)return t(img)}}})})));case 2:case"end":return t.stop()}}),t)})))()},removeSubClass:function(e,t){if(!e.target.value){var sub=this.tableData[t].sub;if(!sub.length)return!1;this.tableData[t].sub.splice(sub.length-1,1)}},getConfigData:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$testload();case 3:if("string"!=typeof(n=t.sent)){t.next=6;break}return t.abrupt("return",JSON.parse(n||null));case 6:t.next=11;break;case 8:return t.prev=8,t.t0=t.catch(0),t.abrupt("return",JSON.parse(localStorage.getItem("classificationData")||null));case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()}}},x=(n(332),Object(f.a)(h,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"g-config"},[n("GHeader",{model:{value:e.title,callback:function(t){e.title=t},expression:"title"}}),e._v(" "),n("div",{staticClass:"g-config__main"},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,height:"100%"}},[n("el-table-column",{attrs:{prop:"className",label:e.nameLabel,width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("i",{staticClass:"el-icon-circle-close g-config__remove",on:{click:function(n){return e.removeClass(t.$index)}}}),e._v(" "),n("el-input",{staticClass:"g-config__class-name",attrs:{maxlength:"4",placeholder:"点击输入类别"},nativeOn:{keyup:function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"enter",13,n.key,"Enter")?null:e.focusSubClassName(t.$index)}},model:{value:t.row.className,callback:function(n){e.$set(t.row,"className",n)},expression:"scope.row.className"}})]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"subClass",label:e.subClassLabel},scopedSlots:e._u([{key:"default",fn:function(t){return[e._l(t.row.sub,(function(sub,i){return n("el-input",{key:i,staticClass:"g-config__sub-class",attrs:{maxlength:"4"},on:{blur:function(n){return e.subBlur(n,t.$index,i)}},model:{value:e.tableData[t.$index].sub[i],callback:function(n){e.$set(e.tableData[t.$index].sub,i,n)},expression:"tableData[scope.$index].sub[i]"}})})),e._v(" "),n("el-input",{staticClass:"g-config__sub-class-input",attrs:{maxlength:"4",placeholder:"单击输入，按【回车】添加"},nativeOn:{keyup:function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"enter",13,n.key,"Enter")?null:e.addSubClassName(t)},keydown:function(n){return n.type.indexOf("key")||8===n.keyCode?e.removeSubClass(n,t.$index):null}},model:{value:t.row.subClass,callback:function(n){e.$set(t.row,"subClass",n)},expression:"scope.row.subClass"}})]}}])})],1)],1),e._v(" "),n("GFooter",{on:{commit:e.commit,addDefaultData:e.addDefaultData}},[n("el-button",{staticClass:"g-config__addClass",attrs:{type:"warning",round:"",icon:"el-icon-circle-plus-outline"},on:{click:e.addClass}},[e._v("添加分类")])],1)],1)}),[],!1,null,null,null));t.default=x.exports}}]);